<% provide(:title, @robot.name) %>

<%= render "shared/title", title: (yield :title) %>

<div class="row">
  <div class="col-lg-12">
    <table class="table table-striped table-condensed">
      <tbody>
        <tr>
          <td>読み方：</td>
          <td><%= @robot.kana %></td>
        </tr>
        <tr>
          <td>チーム：</td>
          <td><%= @robot.team %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h3>対戦成績</h3>
    <table class="table table-striped table-condensed">
      <thead>
        <tr>
          <th>試合</th>
          <th>対戦キャンパス</th>
          <th>対戦チーム</th>
          <th>勝敗</th>
        </tr>
      </thead>
      <tbody>
        <% @games.each do |game| %>
          <%
            team_left = Robot.joins(:campus).find_by(code: game.team_left)
            team_right = Robot.joins(:campus).find_by(code: game.team_right)
            winner_team = Robot.joins(:campus).find_by(code: game.winner_team)
            opponent = @robot.code != team_left.code ? team_left : team_right
          %>
          <tr>
            <td><%= game.round %>回戦　第<%= game.game %>試合</td>
            <td><%= link_to opponent.campus.abbreviation, campus_path(opponent.campus.code) %></td>
            <td><%= link_to opponent.name, robot_path(opponent.code) %></td>
            <td><%= opponent.code != winner_team.code ? "勝ち" : "負け" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
