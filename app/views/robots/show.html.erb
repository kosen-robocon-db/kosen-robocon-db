<% provide(:title, @robot.name) %>

<%= render "shared/title", title: (yield :title) %>

<div class="row">
  <div class="col-lg-12">
    <div align="right">
      <%= link_to fa_icon("pencil-square ", text:"編集"), edit_robot_path %>
    </div>
    <table class="table table-striped table-condensed">
      <tbody>
        <tr>
          <td>読み方：</td>
          <td><%= @robot.kana %></td>
        </tr>
        <tr>
          <td>チーム：</td>
          <td><%= @robot.team %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <% if !@robot.robot_condition.blank? then %>
    <div align="right">
      <%= link_to fa_icon("pencil-square", text:"編集"), edit_robot_robot_conditions_path(@robot.code) %>
      または
      <%= link_to fa_icon("trash", text:"逸失に変更"),
        robot_robot_conditions_path(@robot.code), :method => :delete,
        data: {confirm: "逸失に変更しますか？"} %>
    </div>
    <% else %>
    <div align="right"><%= link_to fa_icon("pencil-square-o", text:"現存に変更"), new_robot_robot_conditions_path(@robot.code) %></div>
    <% end %>
    <table class="table table-striped table-condensed">
      <tbody>
        <tr>
          <td>現況：</td>
          <% if !@robot.robot_condition.blank? then %>
          <td>現存</td>
          <% else %>
          <td>逸失</td>
          <% end %>
        </tr>
        <% if !@robot.robot_condition.blank? then %>
        <tr>
          <td></td>
          <% if @robot.robot_condition.fully_operational then %>
          <td>動態保存</td>
          <% else %>
          <td>静態保存</td>
          <% end %>
        </tr>
        <tr>
          <td></td>
          <% if !@robot.robot_condition.restoration then %>
          <td>オリジナル</td>
          <% else %>
          <td>復刻</td>
          <% end %>
        </tr>
        <tr>
          <td></td>
          <% if !@robot.robot_condition.memo.blank? then %>
          <td><%= @robot.robot_condition.memo %></td>
          <% else %>
          <td></td>
          <% end %>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h4>対戦成績</h4>
    <div align="right">
      <%= link_to fa_icon("pencil-square-o", text:"新規登録"),
        new_robot_game_path(robot_code: @robot.code) %>
    </div>
    <table class="table table-striped table-condensed">
      <thead>
        <tr>
          <th>地区／全国</th>
          <th>試合</th>
          <th>対戦キャンパス</th>
          <th>対戦チーム</th>
          <th>勝敗</th>
        </tr>
      </thead>
      <tbody>
        <% @games.each do |game| %>
          <%
            left_robot = Robot.joins(:campus).find_by(code: game.left_robot_code)
            right_robot = Robot.joins(:campus).find_by(code: game.right_robot_code)
            opponent = @robot.code != left_robot.code ? left_robot : right_robot
          %>
          <tr>
            <td><%= game.region.name %></td>
            <td><%= link_to game.round.to_s+"回戦 第"+game.game.to_s+"試合",
              robot_game_path(robot_code: @robot.code, code: game.code) %></td>
            <td><%= link_to opponent.campus.abbreviation, campus_path(opponent.campus.code) %></td>
            <td><%= link_to opponent.name, robot_path(opponent.code) %></td>
            <td><%= opponent.code != game.winner_robot_code ? "勝ち" : "負け" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= render "shared/prize_histories", prize_histories: @prize_histories %>
