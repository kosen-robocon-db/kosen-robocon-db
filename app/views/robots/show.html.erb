<% provide(:title, @robot.name) %>

<%= render "shared/title", title: (yield :title) %>

<div class="row">
  <div class="col-lg-12">
    <table class="table table-striped table-condensed">
      <tbody>
        <tr>
          <td>読み方：</td>
          <td><%= @robot.kana %></td>
        </tr>
        <tr>
          <td>チーム：</td>
          <td><%= @robot.team %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h4>対戦成績</h4>
    <table class="table table-striped table-condensed">
      <thead>
        <tr>
          <th>地区／全国</th>
          <th>試合</th>
          <th>対戦キャンパス</th>
          <th>対戦チーム</th>
          <th>勝敗</th>
        </tr>
      </thead>
      <tbody>
        <% @games.each do |game| %>
          <%
            left_robot = Robot.joins(:campus).find_by(code: game.left_robot_code)
            right_robot = Robot.joins(:campus).find_by(code: game.right_robot_code)
            opponent = @robot.code != left_robot.code ? left_robot : right_robot
          %>
          <tr>
            <td><%= game.region.name %></td>
            <td><%= game.round %>回戦　第<%= game.game %>試合</td>
            <td><%= link_to opponent.campus.abbreviation, campus_path(opponent.campus.code) %></td>
            <td><%= link_to opponent.name, robot_path(opponent.code) %></td>
            <td><%= opponent.code != game.winner_robot_code ? "勝ち" : "負け" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <% unless @prize_histories.blank? %>
      <h4>優勝／受賞歴</h4>
      <ul>
        <% @prize_histories.each do |history| %>
        <%    region = history.region.code == 0 ? "全国大会" : "地区大会" %>
        <li>第 <%= history.contest.nth %> 回 <%= history.contest.name %> <%= region %> <%= history.prize.name %></li>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>
